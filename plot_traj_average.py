import matplotlib.pyplot as plt
import numpy as np

chunks = [
    """e1.2099490494212195,n0.08162737329629191
e0.017160859258976726,n0.0003679624283091819
e0.035027704208140616,n0.0008266006418048067
e0.05280383018791636,n0.001348777319938737
e0.07171352204162024,n0.0019817916735848213
e0.09140213659594203,n0.0027116382781891745
e0.11032878771731432,n0.0034835697176489743
e0.1306788025623896,n0.004383555571350487
e0.1517293087307096,n0.005386127426506991
e0.17272876312292398,n0.0064634558660513226
e0.1942572667872771,n0.007639908960009826
e0.21559445685063033,n0.008891049519854975
e0.23743021854805077,n0.010240767448347933
e0.2596648815759839,n0.011687664126858432
e0.28196848391405394,n0.013221647560675728
e0.304022700505076,n0.014830905827693641
e0.3265828594322034,n0.01653802221977806
e0.3487659409181512,n0.018314221073833712
e0.37195247194192255,n0.020201481489880765
e0.3954252000880165,n0.02217658752565609
e0.4160102682904603,n0.024215829140070748
e0.4348189817367498,n0.026316445442213815
e0.4347900362212231,n0.028511679109602058
e0.44673499836496006,n0.030791681113732147
e0.4068042316023221,n0.033129718261176444
e0.40516037413351325,n0.035524475393182736
e0.40323112808797074,n0.03798554489943892
e0.4024535026045224,n0.04052909684337755
e0.4012786909591709,n0.04314410193585493
e0.4010817266305899,n0.04581743034415264
e0.40054287218198953,n0.04855069590415409
e0.3997000024481825,n0.051336299422434825
e0.399044172568965,n0.05417808124726202
e0.39935119938974745,n0.05708472041086234
e0.3991501636842162,n0.06003991758668835
e0.39901342407207036,n0.06305450051676165
e0.39869959944731587,n0.06612235374818061
e0.3962940261597086,n0.06922617345117033
e0.3957842016874991,n0.07237662931785305
e0.3943380150331576,n0.07555840965707172
e0.3926018763183705,n0.07877293733899739
e0.3910875806409712,n0.08201412279208369
e0.3901473506805215,n0.08527949921281493
e0.38999610907736265,n0.08856390893677289
e0.3882640841286357,n0.09186607106598689
e0.38601380863667845,n0.0951806262378244
e0.38505103251403894,n0.09850258361597723
e0.3837059514886239,n0.1018272309088485
e0.383150452178249,n0.10513999404514486
e0.3826339191570135,n0.10844225403010607
e0.38245886984712224,n0.11173172729545609
e0.38261955678419635,n0.11498049576766789
e0.3808539026296707,n0.11821403263998713
e0.37985970178604167,n0.12141755957929219
e0.3780875300160025,n0.12452580333697273
e0.37647144973186397,n0.12757613515094954
e0.3725892905965745,n0.1306331603109163
e0.3694174178118045,n0.13356640556470512
e0.36533248928212064,n0.1364570598345884
e0.36220404662983247,n0.13924598397360125
e0.35859464563613885,n0.1419415976554948
e0.3543883016137307,n0.14460943823066005
e0.34959146819520803,n0.14713609179462048
e0.3432318572700519,n0.14961073269938774
e0.3358946175285382,n0.15196124630970287
e0.3275442284100288,n0.15418538267902554
e0.3197295905463645,n0.15632618631810902
e0.3112506655854807,n0.15811852273838398
e0.3024497984777244,n0.15322706289589405
e0.29428595840742694,n0.15088949912287136
e0.2848817204723402,n0.1469495145831891
e0.27521466987889925,n0.14618145947671554
e0.2649589267434265,n0.11813496660807744
e0.255536419090857,n0.11246146458607326
e0.24665012887550242,n0.10710552008079484
e0.23640710169181942,n0.10385413870879232
e0.22755174299310696,n0.09750916524245305
e0.21909216478122695,n0.09202909393810686
e0.21457084654855166,n0.08779163563752825
e0.21607078275453803,n0.08527791362374704
e0.21904579841933075,n0.08435375185960785
e0.22376359910413157,n0.08122674193223343
e0.23010289713838186,n0.08033429333405133
e0.23831076954244984,n0.07923253516151392
e0.24806778822954934,n0.0790416546899112
e0.2596814095620388,n0.07911381599780648
e0.2729364599230045,n0.07927486855298915
e0.28774211864715366,n0.07950523077817435
e0.3045471372374487,n0.07989505220927853
e0.322865894490957,n0.0802740880085076
e0.34323116530573855,n0.08079771923911856
e0.3649522284816138,n0.08130470695756772
e0.3886027412471718,n0.08191085794068714
e0.41410891783604536,n0.08259269991453658
e0.44094910734101506,n0.08331565373141239
e0.4688267936069949,n0.08404317742431576
e0.49869927018447385,n0.08490208591621845
e0.5297611781843056,n0.08579164986657177
e0.5624038427108354,n0.08675228911352918
e0.5960601557933533,n0.08773372835043738
e0.6311034544809484,n0.08875924539058766
e0.6678862700429546,n0.0898451698359419
e0.7062023081451387,n0.09095719990944688
e0.7456728800378264,n0.09210084016841064
e0.7857047950463776,n0.09319371163369493
e0.8275858242664749,n0.09439108102146457
e0.8704248436152603,n0.0956061339634966
e0.9148178404624985,n0.09684781737853476
e0.9599077125829818,n0.09804749474216728
e1.0065221149787713,n0.09924933800543163
e1.0541147670852258,n0.10042524811851376
e1.1026299230081271,n0.10164765853613139
e1.1520962153643153,n0.10283510138260875
e1.2023970567558748,n0.1040189506936858
e1.2530965637409455,n0.10516382404603064
e1.3054065318014028,n0.1063181856260734
e1.3583914619948507,n0.10748225985035459
e1.4124448838924861,n0.10867324405835267
e1.4668863167790598,n0.10981512925230917""",
    """e2.570931288881567,n0.14682703666086938
e0.06650078821348379,n0.003425016943868753
e0.13440227588588322,n0.006824874238589325
e0.20423369558458845,n0.010198332238438967
e0.27555056937177336,n0.01354076246152053
e0.3481370405872931,n0.016847585551944134
e0.42197970238142973,n0.020119340342746393
e0.4951802180375199,n0.023345445139283265
e0.5716603540343459,n0.026542752759682167
e0.648595645346339,n0.029698158438141282
e0.7271914993887894,n0.03281662097402118
e0.8062397473208556,n0.03589126942679286
e0.8867262513710287,n0.038925296843454645
e0.9688183922182164,n0.04192096794124793
e1.0511777083807927,n0.044873653374914384
e1.1351615888513373,n0.04778606709898323
e1.2194337830265254,n0.05065742504556437
e1.3040332823302723,n0.05348670049696355
e1.3906218432528723,n0.05627779645996319
e1.4780707447446657,n0.05902732606423465
e1.5671244408859797,n0.061738244310726186
e1.6564138054026518,n0.06440670214140334
e1.7468387130207408,n0.06703743801225681
e1.8420232696055963,n0.06964376540602864
e1.937018787691911,n0.07220855884102953
e2.033775685885229,n0.07473929268182129
e2.130062355907206,n0.07722666444307244
e2.2281939147770204,n0.07968173113374694
e2.326462760539977,n0.08209773577447678
e2.4277655378515783,n0.08448424500136359
e2.528946786792949,n0.08683198280380787
e2.6302954797302625,n0.0891414934316197
e2.73285579921684,n0.09141597596777452
e2.836351443925948,n0.09365563661715871
e2.940907127857271,n0.09586102697696235
e3.045847095469189,n0.09803139290495498
e3.1519144139413067,n0.10016894835878062
e3.2583291028726946,n0.10227213745584358
e3.3655777090011996,n0.10434051480244946
e3.4735771792283208,n0.10637416336182001
e3.580403309682623,n0.10836929427208127
e3.6893235333109704,n0.11032944239323607
e3.7982789447763934,n0.1122517898175362
e3.908046400089547,n0.11413705260115298
e4.018304777737531,n0.1159834678687558
e4.128030088051487,n0.11779152034857386
e4.23800178440445,n0.11956042726650029
e4.348763559694477,n0.12128796385399795
e4.459694678624903,n0.1229895184496166
e4.571025212438513,n0.12464798618913503
e4.68227839304537,n0.1262656089044302
e4.793515107445293,n0.12784274765164466
e4.90533185157283,n0.1293793460354209
e5.016976122609402,n0.13087933173755537
e5.129312000082605,n0.13234812313489414
e5.241231303417904,n0.1337867023247118
e5.3530849782287495,n0.1352005246598777
e5.465864530494877,n0.1366007812321186
e5.577609266839746,n0.13797284457329156
e5.690132603083259,n0.1393384366271061
e5.802894969398747,n0.1406946129140419
e5.91523479224447,n0.14203511441025782
e6.027478733359886,n0.14337084082936918
e6.135881396222268,n0.14470055449905025
e6.226012599759584,n0.14602429647300694
e6.323475517987626,n0.1473594081688773
e6.420392364810686,n0.14869130723480437
e6.516243335322754,n0.15003556999050685
e6.5010875857683725,n0.1514170061243144
e6.574853347098719,n0.15279267977520422
e6.648163491320432,n0.15418031289166695
e6.722017888314833,n0.1556265417989847
e6.409877493751953,n0.15705834179361527
e6.439344724257968,n0.1585686894133687
e6.470160769332024,n0.1600863996163212
e6.498588744917495,n0.16165140585319415
e6.5303971571822625,n0.1632519717856839
e6.560873626316961,n0.16490852722545735
e6.5930044145071625,n0.1666072674875928
e6.62458149371354,n0.16835207079058967
e6.160175292871616,n0.17014594764222166
e6.1613425789149225,n0.1720165351556765
e6.164764433249995,n0.17394528735831782
e6.165293335533902,n0.17593056165638404
e6.165753675354771,n0.17800244761731576
e6.1616344537866,n0.18014228726057588
e6.156665956869256,n0.1823423765272506
e6.147292635388785,n0.18462152426206582
e6.134395766304806,n0.18687564350563932
e6.891762767347973,n0.18930733482781295""",
    """e1.2244276212726686,n0.0919023075081881
e0.06205531833237579,n0.0004592708006461777
e0.12331426377985971,n0.0009863654092427284
e0.18406748128519024,n0.0016167621749142806
e0.243657085990346,n0.0022955556060113604
e0.30249265769358585,n0.0030917093630820985
e0.36021510474741086,n0.003975575262552531
e0.41667593522342267,n0.004943154414711648
e0.4719709748736085,n0.006039623676173428
e0.5255671735577625,n0.007195314207661246
e0.5777421813580164,n0.008462691342054064
e0.6283382311344476,n0.009809270126636696
e0.6776419155233141,n0.011279752965839137
e0.7258346917134804,n0.012900784355465067
e0.7723321527015989,n0.014578029799161764
e0.8172403476906265,n0.016406585161805785
e0.8603122313938069,n0.01830237184863084
e0.9016073518309486,n0.020320679989973545
e0.940988038992694,n0.022471498668430342
e0.9783781116111352,n0.02469800872895768
e1.0137653402761166,n0.027001746723221406
e1.0470261106858272,n0.029445270630752758
e1.078204546365505,n0.032009669350430606
e1.107420150266662,n0.03467644941278551
e1.1348384135392269,n0.03744998679708236
e1.1603887319612864,n0.04036057992744698
e1.1842531368454239,n0.04335971783462261
e1.2064224933237133,n0.04646148883476459
e1.226788763356304,n0.049687215471985166
e1.2454664906734483,n0.052982744817479104
e1.2624155756504345,n0.056351682476738774
e1.2775695533011227,n0.05982901692075073
e1.2907971544548495,n0.06341100668918992
e1.3020178379950473,n0.06713071138051058
e1.3116709898073822,n0.07091782184406406
e1.3197677185430645,n0.07474688860888361
e1.3255461832384021,n0.07873959964752276
e1.3297822281761986,n0.08277429002411073
e1.331998742858155,n0.0869087420167431
e1.3315534296783706,n0.09109591054064888
e1.3224522017703821,n0.09537815335625537
e1.3236476652042093,n0.09975387103284004
e1.3290387600526046,n0.10419615813920265
e1.3360708385663447,n0.10867831803779437
e1.3008885887665822,n0.11319713801559475
e1.3554172863818523,n0.11779973576604216
e1.3678075273985675,n0.12242984961442373
e1.382244985900504,n0.12712414349335685
e1.2678950261574105,n0.13188227605340735
e1.286324121608034,n0.13669415356877146
e1.436941717941962,n0.14146161339585744
e1.4584037411324162,n0.1462645227454169
e1.4377537849885855,n0.15060485792765146
e1.506029552198631,n0.15594912016586887
e1.5318195213792876,n0.1599573444269558
e1.5585540089581935,n0.16462231690073928
e1.455914680129373,n0.16678651350318754
e1.6162754904759664,n0.17397179958169107
e1.6469520784806086,n0.17864308785647154
e1.6775182409938203,n0.18327205951655748
e1.6658730235797101,n0.18364112469904795
e1.7428630346490228,n0.18781362720592706
e1.7766042778480344,n0.19196337975423644
e1.8113847387817235,n0.1960854396475331
e1.7162966748213557,n0.18785839980694824
e1.752978211637123,n0.19096020839753605
e1.9203327959834564,n0.20833509602391767
e1.9580368481492674,n0.21236997322184303
e1.9514023345444234,n0.2163604550856959
e2.03383297478243,n0.22032751940269635
e2.0732958196614937,n0.22426338176977226
e2.1128124736330136,n0.22814645354818336
e1.993991327218566,n0.21180771193688824
e2.193941806489232,n0.21457803174705495
e2.235051801868606,n0.21730164535560462
e2.276809625783393,n0.21986013190406892
e2.2531621356823646,n0.22230989747143612
e2.2322709108086882,n0.22466696757409307
e2.2557066010508966,n0.22694090626414412
e2.2783812865061766,n0.2567713170327128
e2.0122839118487685,n0.21599506362336418
e2.0132829530698015,n0.217044139512514
e2.0129007426245757,n0.21792621331328832
e2.0136222092255522,n0.23707072472534876
e2.01340487909013,n0.23894406422706588
e2.0142305802459037,n0.24068790179721655
e2.014781463742207,n0.24237686353760263
e2.0120139120996035,n0.2440617082088634
e2.0092386431048412,n0.24564273748300458
e2.0065285779265367,n0.2472541125284301
e2.0038203827734353,n0.24882060070842427
e1.9996085535284014,n0.2502668956270018
e1.9938622070048324,n0.2517380557422127
e1.9879971718204346,n0.25310802991654746
e1.982164687611946,n0.2543437805756059
e1.9776640649858452,n0.255626317367411
e1.9727126922798417,n0.22433808490279175
e1.9677418996216531,n0.22433984158166423
e1.9641832932734384,n0.22444822377569618
e1.9600964231464628,n0.22439017510731463
e1.9565567371725578,n0.22430950909034994
e1.9526580267742266,n0.2243216700171904
e1.9499985563172098,n0.22434546978572611
e1.9474022983128043,n0.22437588692391439
e1.944201677789722,n0.22439367177516775
e1.9402324086410565,n0.2243369373754061
e1.9369439092260248,n0.2243595568133055
e1.932095800178734,n0.22428285263271797
e1.9271226201539677,n0.26914914922108724
e1.9222329281299453,n0.2699762737432682
e1.916716165891134,n0.27070060637459237
e1.9112866271882214,n0.2714939156236748
e1.9043443183840878,n0.22320951925462515
e1.8984031307744478,n0.22287714837867983
e1.8936817145801061,n0.22250671856716353
e1.8872782542421385,n0.22201879091422866
e1.8827554660602275,n0.22158420522988
e1.8788082318533847,n0.22108815984662483
e1.874492500180923,n0.2204404134751746
e1.8706310595544031,n0.21983313251769654
e1.864120048377478,n0.21915316838209356
e1.858071547623714,n0.21829957215647613
e1.8500017674939175,n0.21732897833531734
e1.8411928273573588,n0.2163476309339915
e1.8311325599151176,n0.21507370295545097
e1.8207395034263196,n0.21393648347763158
e1.8110215121263604,n0.21253410684161636
e1.8028777012596566,n0.2107553467987273
e1.7943026134079056,n0.2087450190028422
e1.785359045176794,n0.20710881750429513
e1.7759166822596897,n0.205399149060545
e1.7658234401981756,n0.2035318466898783
e1.755878991597682,n0.20154773462169542
e1.744166227853697,n0.19935366229730703
e1.7329891607440668,n0.19710100952673842
e1.7248701922026974,n0.19481909892733687""",
    """e7.167277943553252,n0.03247170151240125
e0.010235941140449211,n0.002298697543608927
e0.018534135808820174,n0.004508332803019697
e0.024656992712893438,n0.006595325495414052
e0.028824308252240503,n0.008637893169676674
e0.030803264692706566,n0.010565268403860097
e0.030811692705646772,n0.012455459216071926
e0.03253255408292051,n0.014307819105223897
e0.036371561150443404,n0.01605808753616263
e0.04216790762903966,n0.01769682907345753
e0.050439784353414126,n0.01922997176051908
e0.06092825483443148,n0.02068711977125597
e0.0741487804739664,n0.022111897534431563
e0.09063807434249986,n0.0233697643786784
e0.11044769811824434,n0.024564197767026646
e0.13363235884498487,n0.02563557349452653
e0.16015633994493797,n0.026655025669786427
e0.18964286006779468,n0.027583279262882534
e0.22266140352657363,n0.028372530122143552
e0.2578738397317362,n0.029132020633341263
e0.2957705468576661,n0.029784575699991787
e0.33616999061760183,n0.030362597078603414
e0.37911980856208793,n0.030849757565895922
e0.4244132693397894,n0.031275159211291634
e0.47248926754235576,n0.030061926899151395
e0.5234295388989116,n0.027817361870511752
e0.5778699849069733,n0.027262253283532625
e0.6352667825784986,n0.02733234421244448
e0.6954712769917942,n0.027481425378337195
e0.7585244742666188,n0.02771357176153316
e0.8241040723520744,n0.02796786112624422
e0.8931462273248303,n0.02831719696675379
e0.9644975404566534,n0.028682668021275212
e1.0388312156530597,n0.029119993351188672
e1.1163637778462516,n0.029676904865857407
e1.1969619669763074,n0.030308888084975255
e1.280096982687666,n0.030994286551860345
e1.3659339107809463,n0.03175367488641023
e1.4546843323632763,n0.032634554692476836
e1.545549012127707,n0.03354509407894436
e1.6391261817434966,n0.03454072548546972
e1.7348715968756485,n0.03559999774959054
e1.8331653957432807,n0.03676066160221229
e1.9338863178803802,n0.03799444213557566
e2.036954660107833,n0.039311811606370914
e2.142670731288237,n0.040716268223009465
e2.2506727327556066,n0.04217861411785803
e2.361039855659966,n0.04368949182734815
e2.475310967612553,n0.045450622931161186
e2.592084874374703,n0.04729836715922989
e2.7104571128009636,n0.049125245251433594
e2.8309783393123484,n0.050987040239971936
e2.9538314384708335,n0.052979775649236185
e3.0781638148929638,n0.055021880717813665
e3.2046577982696314,n0.057198682017432355
e3.332248727135125,n0.05939431758549487
e3.4621773255306665,n0.06172905299217277
e3.5937307820254554,n0.06412644417879661
e3.7268306677875986,n0.06658390420969076
e3.86118306502155,n0.06905735761272846
e3.996969235894455,n0.07158957451063487
e4.134100200721788,n0.07413305623994507
e4.272557351271953,n0.07668899003291484
e4.412537443447983,n0.07931181031144849
e4.554018917583534,n0.08199509814352796
e4.696342024382998,n0.0846355876539709
e4.83990982969588,n0.0873232251489247
e4.984765650306951,n0.09007582331757955""",
    # Add more chunks if needed
]

e_lists = []
n_lists = []

for chunk in chunks:
    lines = [l.strip() for l in chunk.strip().split('\n') if l.strip()]
    e_vals = []
    n_vals = []
    for line in lines[:66]:
        parts = line.split(',')
        e_val = float(parts[0][1:])  # remove 'e'
        n_val = float(parts[1][1:])  # remove 'n'
        e_vals.append(e_val)
        n_vals.append(n_val)
    e_lists.append(e_vals)
    n_lists.append(n_vals)

# Now average across chunks for each row index
avg_e = []
avg_n = []
num_chunks = len(e_lists)
for i in range(66):
    e_at_i = [e_lists[j][i] for j in range(num_chunks)]
    n_at_i = [n_lists[j][i] for j in range(num_chunks)]
    avg_e.append(np.mean(e_at_i))
    avg_n.append(np.mean(n_at_i))
    

N = len(avg_e) - 1
t = np.linspace(1, 180, 65)

plt.rcParams.update({
    'font.family': 'serif',
    'font.serif': ['Times New Roman'],
    'font.size': 6,
    'axes.linewidth': 1.0,
    'xtick.direction': 'in',
    'ytick.direction': 'in',
    'xtick.major.size': 4,
    'ytick.major.size': 4,
    'xtick.major.width': 1.0,
    'ytick.major.width': 1.0,
    'legend.frameon': False,
    'pdf.fonttype': 42,    # embed fonts as Type 42 (TrueType)
    'ps.fonttype': 42,
})

# Create the figure
fig, ax = plt.subplots(figsize=(6, 3), dpi=300)

# Plot Easting error
ax.plot(
    t, avg_e[1:], 
    linestyle='-', marker='o', markersize=4, 
    linewidth=1.5
)
# Plot Northing error
# ax.plot(
#     t, avg_n[1:], 
#     linestyle='-', marker='s', markersize=4, 
#     linewidth=1.5, label='Average Northing Error'
# )
# Labels & title
ax.set_xlabel('Time (seconds)', labelpad=6)
ax.set_ylabel('Average Error (meters)', labelpad=6)
ax.set_title('Average Easting Errors Over Time', pad=8)

# Ticks at every 5 seconds
ax.set_xticks(np.arange(0, 180, 10))
ax.tick_params(axis='both', which='major')

# Light dashed grid
ax.grid(True, linestyle='--', linewidth=0.5, alpha=0.7)

# Legend
ax.legend(loc='best', fontsize=8)

plt.tight_layout()
plt.show()

# If you want to access the arrays:
# print(avg_e)
# print(avg_n)
